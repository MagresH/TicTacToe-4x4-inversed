<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .game-row {
            display: flex;
        }

        .game-cell {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <h1 class="text-center mb-4">Tic-Tac-Toe Game</h1>
    <div id="game-board" class="d-flex flex-column align-items-center"></div>
    <div class="text-center mt-4">
        <button id="new-game" class="btn btn-primary">New Game</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
<script>
    const BOARD_SIZE = 4;
    let gameBoard = Array(BOARD_SIZE).fill().map(() => Array(BOARD_SIZE).fill(''));

    document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("new-game").addEventListener("click", createGameBoard);
        createGameBoard();
    });

    function createGameBoard() {
        let gameBoardElement = document.getElementById("game-board");
        gameBoardElement.innerHTML = "";

        for (let i = 0; i < BOARD_SIZE; i++) {
            let row = document.createElement("div");
            row.className = "game-row";

            for (let j = 0; j < BOARD_SIZE; j++) {
                let cell = document.createElement("div");
                cell.className = "border game-cell m-1";
                cell.dataset.x = i;
                cell.dataset.y = j;

                cell.addEventListener("click", function () {
                    let x = this.dataset.x;
                    let y = this.dataset.y;
                    if (gameBoard[x][y] === '') {
                        gameBoard[x][y] = 'X';
                        this.textContent = "X";
                        if (checkGameOver(x, y)) {
                            alert("Player X lost!");
                            createGameBoard();
                        }
                    }
                });

                row.appendChild(cell);
            }
            gameBoardElement.appendChild(row);
        }
        gameBoard = Array(BOARD_SIZE).fill().map(() => Array(BOARD_SIZE).fill(''));
    }

    function checkGameOver(x, y) {
        const directions = [
            { dx: 1, dy: 0 },
            { dx: 0, dy: 1 },
            { dx: 1, dy: 1 },
            { dx: 1, dy: -1 },
        ];

        for (const { dx, dy } of directions) {
            let count = 0;
            for (let i = -3; i <= 3; i++) {
                let newX = x + i *dx;
                let newY = y + i * dy;
                if (newX >= 0 && newX < BOARD_SIZE && newY >= 0 && newY < BOARD_SIZE && gameBoard[newX][newY] === 'X') {
                    count++;
                    if (count === 4) {
                        return true;
                    }
                } else {
                    count = 0;
                }
            }
        }
        return false;
    }
</script>

</body>
</html>
